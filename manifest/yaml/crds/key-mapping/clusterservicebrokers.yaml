apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: clusterservicebrokers.servicecatalog.k8s.io
  labels:
    svcat: "true"
  annotations:
    "api-approved.kubernetes.io": "unapproved"
spec:
  group: servicecatalog.k8s.io
  scope: Cluster
  names:
    plural: clusterservicebrokers
    singular: clusterservicebroker
    kind: ClusterServiceBroker
    # categories is a list of grouped resources the custom resource belongs to.
    categories:
    - all
    - svcat
  versions:
  - name: v1beta1
    additionalPrinterColumns:
    - name: URL
      type: string
      jsonPath: .spec.url
    - name: Status
      type: string
      jsonPath: .status.lastConditionState
    - name: Age
      type: date
      jsonPath: .metadata.creationTimestamp
    schema:
      openAPIV3Schema:
        description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema'
        properties:
          apiVersion:
            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.apiVersion'
            type: string
          kind:
            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.kind'
            type: string
          metadata:
            # metadata 필드에 description 포함되면 에러 발생
            # description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.metadata'
            type: object
          spec:
            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec'
            properties:
              authInfo:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo'
                properties:
                  basic:
                    description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.basic'
                    properties:
                      secretRef:
                        description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.basic.properties.secretRef'
                        properties:
                          name:
                            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.basic.properties.secretRef.properties.name'
                            type: string
                          namespace:
                            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.basic.properties.secretRef.properties.namespace'
                            type: string
                        type: object
                    type: object
                  bearer:
                    description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.bearer'
                    properties:
                      secretRef:
                        description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.bearer.properties.secretRef'
                        properties:
                          name:
                            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.bearer.properties.secretRef.properties.name'
                            type: string
                          namespace:
                            description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.authInfo.properties.bearer.properties.secretRef.properties.namespace'
                            type: string
                        type: object
                    type: object
                type: object
              caBundle:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.caBundle'
                format: byte
                type: string
              catalogRestrictions:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.catalogRestrictions'
                properties:
                  serviceClass:
                    description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.catalogRestrictions.properties.serviceClass'
                    items:
                      type: string
                    type: array
                  servicePlan:
                    description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.catalogRestrictions.properties.servicePlan'
                    items:
                      type: string
                    type: array
                type: object
              insecureSkipTLSVerify:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.insecureSkipTLSVerify'
                type: boolean
              relistBehavior:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.relistBehavior'
                enum:
                - Duration
                - Manual
                type: string
              relistDuration:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.relistDuration'
                type: string
              relistRequests:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.relistRequests'
                format: int64
                type: integer
              url:
                description: '%clusterservicebroker.yaml.spec.versions.schema.openAPIV3Schema.properties.spec.properties.url'
                type: string
            required:
            - url
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}